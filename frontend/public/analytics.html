<!-- analytics.html -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LinkedIn Helper ‚Äì Analytics</title>
  <link rel="stylesheet" href="alumni_style.css" />
  <link rel="stylesheet" href="analytics_style.css" />
  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <!-- Chart.js for visualizations -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
</head>

<body>
  <header class="appbar" role="banner">
    <div class="appbar-inner">
      <div class="brand" aria-label="UNT Alumni Network">
        <img src="/assets/unt-logo.png" alt="UNT Logo" class="unt-logo" />
        <div class="brand-text">
          <span class="brand-title">Alumni Network</span>
          <small>Analytics</small>
        </div>
      </div>
      <div class="app-actions">
        <a class="btn action-btn" href="/alumni">‚Üê Back to Alumni</a>
        <a class="btn secondary" href="/logout">Sign out</a>
      </div>
    </div>
  </header>

  <main class="analytics-page" role="main">
    <!-- Page Header -->
    <section class="analytics-header">
      <h1>Alumni Analytics Dashboard</h1>
      <p class="analytics-description">Comprehensive insights into alumni career paths, locations, and trends</p>
      <button id="analyticsFilterToggleBtn" class="analytics-filter-toggle" title="Open Filters">
        <i class="fas fa-filter"></i>
        <span>Filters</span>
        <span id="analyticsFilterBadge" class="analytics-filter-badge">0</span>
      </button>
    </section>

    <!-- Filter Modal Backdrop -->
    <div class="analytics-filter-backdrop" id="analyticsFilterBackdrop"></div>

    <!-- Filter Panel (Modal) -->
    <div class="analytics-filter-panel" id="analyticsFilterPanel">
      <div class="analytics-filter-panel-header">
        <h3>Data Filters</h3>
        <button class="analytics-filter-close-btn" id="analyticsFilterCloseBtn">&times;</button>
      </div>

      <div class="analytics-filter-controls">
        <div class="analytics-filter-group">
          <label for="analyticsFilterLocationInput">
            <i class="fas fa-map-marker-alt"></i> Hide Location
          </label>
          <div class="analytics-filter-input-container">
            <input id="analyticsFilterLocationInput" type="text" placeholder="Type location name..."
              class="analytics-filter-input" />
            <button id="analyticsAddLocationFilterBtn" class="analytics-filter-action-btn">
              <i class="fas fa-plus"></i> Add
            </button>
          </div>
          <div id="analyticsLocationSuggestionsDropdown" class="analytics-suggestions-dropdown"></div>
        </div>

        <div class="analytics-filter-group">
          <label for="analyticsFilterCompanyInput">
            <i class="fas fa-building"></i> Hide Company
          </label>
          <div class="analytics-filter-input-container">
            <input id="analyticsFilterCompanyInput" type="text" placeholder="Type company name..."
              class="analytics-filter-input" />
            <button id="analyticsAddCompanyFilterBtn" class="analytics-filter-action-btn">
              <i class="fas fa-plus"></i> Add
            </button>
          </div>
          <div id="analyticsCompanySuggestionsDropdown" class="analytics-suggestions-dropdown"></div>
        </div>

        <button id="analyticsClearAllFiltersBtn" class="analytics-filter-clear-btn">
          <i class="fas fa-times-circle"></i> Clear All Filters
        </button>
      </div>

      <!-- Active Filters Display -->
      <div class="analytics-filter-content">
        <div>
          <span class="analytics-filter-tags-label">
            <i class="fas fa-map-marker-alt"></i> Hidden Locations (<span id="analyticsLocationFilterCount">0</span>)
          </span>
          <div class="analytics-filter-tags" id="analyticsLocationFilterTags">
            <span class="empty-analytics-filters-message">No locations hidden</span>
          </div>
        </div>
        <div style="margin-top: 16px;">
          <span class="analytics-filter-tags-label">
            <i class="fas fa-building"></i> Hidden Companies (<span id="analyticsCompanyFilterCount">0</span>)
          </span>
          <div class="analytics-filter-tags" id="analyticsCompanyFilterTags">
            <span class="empty-analytics-filters-message">No companies hidden</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Summary Statistics -->
    <section class="stats-overview">
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-users"></i></div>
        <div class="stat-content">
          <h3 id="totalAlumni">0</h3>
          <p>Total Alumni</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-building"></i></div>
        <div class="stat-content">
          <h3 id="totalCompanies">0</h3>
          <p>Unique Companies</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-globe"></i></div>
        <div class="stat-content">
          <h3 id="totalLocations">0</h3>
          <p>Locations</p>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><i class="fas fa-briefcase"></i></div>
        <div class="stat-content">
          <h3 id="totalJobs">0</h3>
          <p>Job Titles</p>
        </div>
      </div>
    </section>

    <!-- Top 5 Common Jobs -->
    <section class="analytics-section">
      <div class="section-header">
        <h2>Top 5 Most Common Job Titles</h2>
        <p>Most popular career paths among alumni</p>
      </div>
      <div class="top-jobs-container">
        <div id="topJobsList" class="top-jobs-list"></div>
      </div>
    </section>

    <!-- Charts Grid -->
    <section class="charts-grid">
      <!-- Job Distribution Pie Chart -->
      <div class="chart-card">
        <h3>Job Title Distribution</h3>
        <div class="chart-wrapper">
          <canvas id="jobPieChart"></canvas>
        </div>
      </div>

      <!-- Company Distribution Pie Chart -->
      <div class="chart-card">
        <h3>Top Companies</h3>
        <div class="chart-wrapper">
          <canvas id="companyPieChart"></canvas>
        </div>
      </div>

      <!-- Location Distribution Pie Chart -->
      <div class="chart-card">
        <h3>Location Distribution</h3>
        <div class="chart-wrapper">
          <canvas id="locationPieChart"></canvas>
        </div>
      </div>

      <!-- Industry Distribution Pie Chart -->
      <div class="chart-card">
        <h3>Industry Distribution</h3>
        <div class="chart-wrapper">
          <canvas id="industryPieChart"></canvas>
        </div>
      </div>
    </section>

    <!-- Line Charts Section -->
    <section class="analytics-section">
      <div class="section-header">
        <h2>Alumni Trends Over Time</h2>
        <p>Graduation trends and career progression</p>
      </div>
      <div class="line-charts-container">
        <!-- Graduation Timeline -->
        <div class="chart-card full-width">
          <h3>Alumni by Graduation Year</h3>
          <div class="chart-wrapper">
            <canvas id="graduationLineChart"></canvas>
          </div>
        </div>
      </div>
    </section>

    <!-- Alumni Modal -->
    <div id="alumniModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <div>
            <h2 id="modalTitle">Filtered Alumni</h2>
            <p id="modalDescription">Click on any chart to filter alumni</p>
          </div>
          <button id="closeModalBtn" class="close-modal-btn">‚úï</button>
        </div>
        <div class="modal-body">
          <div class="table-container">
            <table id="filteredAlumniTable">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Job Title</th>
                  <th>Company</th>
                  <th>Location</th>
                  <th>Grad Year</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="filteredAlumniBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Additional Insights -->
    <section class="analytics-section">
      <div class="section-header">
        <h2>Detailed Breakdown</h2>
        <p>Top companies and career paths</p>
      </div>
      <div class="insights-grid">
        <!-- Top Companies Table -->
        <div class="insight-card">
          <h3>üè¢ Top 10 Employers</h3>
          <div class="table-container">
            <table id="topCompaniesTable">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Company</th>
                  <th>Alumni Count</th>
                </tr>
              </thead>
              <tbody id="topCompaniesBody"></tbody>
            </table>
          </div>
        </div>

        <!-- Top Locations Table -->
        <div class="insight-card">
          <h3>üìç Top 10 Locations</h3>
          <div class="table-container">
            <table id="topLocationsTable">
              <thead>
                <tr>
                  <th>Rank</th>
                  <th>Location</th>
                  <th>Alumni Count</th>
                </tr>
              </thead>
              <tbody id="topLocationsBody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="analytics.js?v=8"></script>
  <script src="analytics_test.js"></script>
</body>

</html>